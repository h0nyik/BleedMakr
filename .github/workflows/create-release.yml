tak to name: Create Release

on:
  push:
    branches: [ master ]
  workflow_dispatch:

permissions:
  contents: write

jobs:
  create-release:
    runs-on: ubuntu-22.04
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Get commit SHA
      id: commit
      run: echo "SHA=${GITHUB_SHA::7}" >> $GITHUB_OUTPUT
    
    - name: Get current date
      id: date
      run: echo "DATE=$(date +'%Y-%m-%d')" >> $GITHUB_OUTPUT
    
    - name: Create Release
      uses: softprops/action-gh-release@v1
      with:
        tag_name: v0.0.1-build-${{ steps.date.outputs.DATE }}-${{ steps.commit.outputs.SHA }}
        name: BleedMakr Build ${{ steps.date.outputs.DATE }} (${{ steps.commit.outputs.SHA }})
        body: |
          ## BleedMakr Build Release
          
          **Datum:** ${{ steps.date.outputs.DATE }}
          **Commit:** ${{ github.sha }}
          **Branch:** ${{ github.ref_name }}
          
          ### Co je nového
          - Automatický build z master větve
          - Všechny platformy (Windows, macOS, Linux)
          - Python 3.10, 3.11, 3.12
          
          ### Poznámky
          - Toto je automatický build, ne oficiální release
          - Pro oficiální release použijte Git tag
          - Verze zůstává 0.0.1 až do vyřešení problémů s buildy
        draft: false
        prerelease: true
        generate_release_notes: true
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} 